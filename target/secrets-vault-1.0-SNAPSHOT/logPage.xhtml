<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:head>
        <title>Log Page</title>
        <h:outputStylesheet name="css/log_page_style.css"/>
        <h:outputStylesheet name="css/user_records_style.css"/>
        <h:outputStylesheet name="primefaces.css" />
    </h:head>

    <h:body>
        <div class="table-container">
        <h:form id="logForm" class="form-container">
            <p:dataTable id="dataTable" var="log" value="#{logMB.filteredLogEntries}" styleClass="custom-datatable"
                         widgetVar="logTableVar" rows="10" paginator="true" paginatorPosition="bottom"
                         currentPageReportTemplate="{startRecord}--{endRecord} of {totalRecords} records"
                         rowsPerPageTemplate="5,10,15,10000" emptyMessage="No records found">

                <p:column headerText="Username" filterBy="#{log.username}" filterMatchMode="contains">
                    <h:outputText value="#{log.username}" />
                </p:column>
                <p:column headerText="Description" filterBy="#{log.description}" filterMatchMode="contains">
                    <h:outputText value="#{log.description}" />
                </p:column>
                <p:column headerText="Timestamp" sortBy="#{log.timestamp}" filterBy="#{log.timestamp}">
                    <f:facet name="header">
                        <p:outputPanel style="display:flex; align-items:center; justify-content:space-between;">
                            <h:outputText value="Timestamp" />
                            <p:calendar id="fromTimestamp" value="#{logMB.filterStartDate}" pattern="dd.MM.yyyy HH:mm:ss" styleClass="calendar-style" navigator="true" widgetVar="fromTimestampWidget" />
                            <p:calendar id="toTimestamp" value="#{logMB.filterEndDate}" pattern="dd.MM.yyyy HH:mm:ss" styleClass="calendar-style" navigator="true" widgetVar="toTimestampWidget" />
                            <p:commandButton value="Filter" action="#{logMB.filterByDate}" update="dataTable" icon="pi pi-filter" styleClass="filter-button" />
                        </p:outputPanel>
                    </f:facet>
                    <h:outputText value="#{log.timestamp}" />
                </p:column>
            </p:dataTable>
        </h:form>
            </div>
    </h:body>
</html>
