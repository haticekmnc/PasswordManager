<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <title>Add Password</title>
        <h:outputStylesheet name="css/add_password_style.css"/>
        <h:outputStylesheet name="primefaces.css" />

    </h:head>

    <h:body>
        <!-- Sayfa yüklendiğinde resetForm metodunu çalıştır -->
        <f:metadata>
            <f:viewAction action="#{passwordMB.resetForm()}" />
        </f:metadata>
        <h:form id="addPasswordForm">
            <div class="container">
                <div class="add-password-form">
                    <h2>Add New Password</h2>

                    <div class="form-field-group">
                        <div class="form-field">
                            <label for="title">System Information:</label>
                            <h:inputText id="title" value="#{passwordMB.selectedPassword.systemInformation}" required="true" requiredMessage="System Information is required." styleClass="auto-expand" />
                            <h:message for="title" style="color: red" />

                        </div>

                        <div class="form-field">
                            <label for="url">Access Information</label>
                            <h:inputText id="url" value="#{passwordMB.selectedPassword.accessInformation}" styleClass="auto-expand" />
                        </div>
                    </div>

                    <div class="form-field-group">
                        <div class="form-field">
                            <label for="username">Username:</label>
                            <h:inputText id="username" value="#{passwordMB.selectedPassword.username}" required="true" styleClass="auto-expand" />
                            <h:message for="username" style="color: red" />
                        </div>
                        <div class="form-field">
                            <label for="password">Password:</label>
                            <h:inputSecret id="password" value="#{passwordMB.selectedPassword.password}" required="true" styleClass="auto-expand" />
                            <h:message for="password" style="color: red" />
                        </div>
                    </div>

                    <div class="form-field">
                        <label for="notes">Notes:</label>
                        <h:inputTextarea id="notes" value="#{passwordMB.selectedPassword.notes}" styleClass="auto-expand" />
                    </div>

                    <div class="form-field">
                        <p:commandButton value="Save" action="#{passwordMB.savePassword}" ajax="false" styleClass="save-button"   />
                        <p:dialog header="Save Dialog" widgetVar="addPasswordDlg" showEffect="explode" hideEffect="bounce" height="100" modal="true">
                            <h:outputText value="Kayıt Başarılı!"/>
                        </p:dialog>  
                    </div>
                </div>
            </div>
        </h:form>
        <div class="form-field" style="position: absolute; top: 20px; left: 20px;">
            <h:button value="&#8592;" style="font-size: 20px;" outcome="index.xhtml" styleClass="back-button">
            </h:button>
        </div>
        <h:outputScript>
            function autoExpandField(field) {
            field.style.height = 'auto';
            field.style.height = field.scrollHeight + 'px';
            }

            document.querySelectorAll('.auto-expand').forEach(field => {
            field.addEventListener('input', function() { autoExpandField(this); });
            autoExpandField(field); // Başlangıçta da boyutlandır
            });
        </h:outputScript>

    </h:body>
</html>
