<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Add Password</title>
    <h:outputStylesheet name="css/add_password_style.css"/>
    <style>
        .form-field-group {
            display: flex;
            justify-content: space-between;
        }

        .form-field-group .form-field {
            flex: 1;
            margin-right: 20px;
        }

        .form-field-group .form-field:last-child {
            margin-right: 0;
        }

        .form-field.notes {
            flex: 1;
            margin-right: 0;
        }

        .form-field.notes .ui-inputtextarea {
            height: auto;
            resize: none;
        }
    </style>
</h:head>
<h:body>
    <h:form id="addPasswordForm">
        <div class="container">
            <div class="add-password-form">
                <h2>Add New Password</h2>
                
                <div class="form-field-group">
                    <div class="form-field">
                        <label for="title">Title:</label>
                        <h:inputText id="title" value="#{passwordMB.title}" required="true" />
                        <h:message for="title" style="color: red" />
                    </div>
                    <div class="form-field">
                        <label for="url">URL:</label>
                        <h:inputText id="url" value="#{passwordMB.url}" />
                    </div>
                </div>

                <div class="form-field-group">
                    <div class="form-field">
                        <label for="username">Username:</label>
                        <h:inputText id="username" value="#{passwordMB.username}" required="true" />
                        <h:message for="username" style="color: red" />
                    </div>
                    <div class="form-field">
                        <label for="password">Password:</label>
                        <h:inputSecret id="password" value="#{passwordMB.password}" required="true" />
                        <h:message for="password" style="color: red" />
                    </div>
                </div>

                <div class="form-field notes">
                    <label for="notes">Notes:</label>
                    <h:inputTextarea id="notes" value="#{passwordMB.notes}" />
                </div>

                <div class="form-field">
                    <h:commandButton value="Save" action="#{passwordMB.savePassword}" styleClass="save-button" />
                </div>
                
                <p:dialog header="Save Dialog" widgetVar="addPasswordDlg" showEffect="explode" hideEffect="bounce" height="100" modal="true">
                    <h:outputText value="Kayıt Başarılı!"/>
                </p:dialog>
            </div>
        </div>
    </h:form>
    
    <div class="form-field" style="position: absolute; top: 20px; left: 20px;">
        <h:button value="&#8592;" style="font-size: 20px;" outcome="index.xhtml" styleClass="back-button">
        </h:button>
    </div>
    
    <h:outputScript>
        document.addEventListener("DOMContentLoaded", function(){
            let isSuccess = "#{passwordMB.isSuccess}";
            if (isSuccess === 'true'){
                PF('addPasswordDlg').show();
            }
        });
    </h:outputScript>
</h:body>
</html>
