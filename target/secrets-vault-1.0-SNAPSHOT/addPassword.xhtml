<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Add Password</title>
        <h:outputStylesheet name="css/add_password_style.css"/>
        

    </h:head>

    <h:body>
        
        
        <h:form id="addPasswordForm">
            <div class="container">
                <div class="add-password-form">
                    <h2>Add New Password</h2>

                    <div class="form-field-group">
                        <div class="form-field">
                            <label for="title">Title:</label>
                            <h:inputText id="title" value="#{passwordMB.selectedPassword.title}" required="true" requiredMessage="Title is required." />
                            <h:message for="title" style="color: red" />

                        </div>
                        <div class="form-field">
                            <label for="url">URL:</label>
                            <h:inputText id="url" value="#{passwordMB.selectedPassword.url}" />
                        </div>
                    </div>

                    <div class="form-field-group">
                        <div class="form-field">
                            <label for="username">Username:</label>
                            <h:inputText id="username" value="#{passwordMB.selectedPassword.username}" required="true" />
                            <h:message for="username" style="color: red" />
                        </div>
                        <div class="form-field">
                            <label for="password">Password:</label>
                            <h:inputSecret id="password" value="#{passwordMB.selectedPassword.password}" required="true" />
                            <h:message for="password" style="color: red" />
                        </div>
                    </div>

                    <div class="form-field notes">
                        <label for="notes">Notes:</label>
                        <h:inputTextarea id="notes" value="#{passwordMB.selectedPassword.notes}" />
                    </div>

                    <div class="form-field">
                        <p:commandButton value="Save" action="#{passwordMB.savePassword}" ajax="false" styleClass="save-button"  />

                    </div>

                    <p:dialog header="Save Dialog" widgetVar="addPasswordDlg" showEffect="explode" hideEffect="bounce" height="100" modal="true">
                        <h:outputText value="Kayıt Başarılı!"/>
                    </p:dialog>
                </div>
            </div>
        </h:form>

        <div class="form-field" style="position: absolute; top: 20px; left: 20px;">
            <h:button value="&#8592;" style="font-size: 20px;" outcome="index.xhtml" styleClass="back-button">
            </h:button>
        </div>

        <h:outputScript>
            document.addEventListener("DOMContentLoaded", function() {
            let isSuccess = "#{passwordBean.isSuccess}";
            if (isSuccess === 'true') {
            PF('addPasswordDlg').show();
            }

            // Not alanını otomatik olarak yeniden boyutlandır
            let textarea = document.getElementById('notes');

            // Kaydırma çubuğunu kaldır
            textarea.style.overflow = 'hidden';

            textarea.addEventListener('input', autoResize, false);

            function autoResize() {
            // Yüksekliği sıfırla ki doğru yükseklik hesaplanabilsin
            this.style.height = 'auto';
            // scrollHeight, elemanın içerik için gereken tam yüksekliğidir.
            // Bu, içeriğin boyutuna göre textarea'nın yüksekliğini ayarlar.
            this.style.height = this.scrollHeight + 'px';
            }

            // İlk yükleme için otomatik boyutlandırmayı tetikle
            autoResize.call(textarea);
            });
        </h:outputScript>

    </h:body>
</html>
